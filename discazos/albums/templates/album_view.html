{% extends "main_layout.html" %}

{% block title %}Discazos | Album{% endblock title %}

{% block pagehead %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/discazos_player.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/colorbox.css" />
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.colorbox-min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/countdown.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/discazos_loader.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.facescroll.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/discazos_player.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/swfobject.js"></script>
<script type="text/javascript">
  ExtensionHandler.init('{% url extension_install %}');
</script>
{% endblock %}

{% block section_nav_class %}albums{% endblock %}
{% block main %}
<div id="discazos-player-flash">
  {% include "player_swf.html" %}
</div>
<div id="content">
  <div id="discazos-player-html">
    <h2 id="title">{{ album.title }}</h2>
    <h3 id="artist">{{ album.artist }}</h3>
    <div id="player-wrapper">
      <div class="main">
        <div class="right">
          <a class="load-link" href="javascript:void(0);" onclick="DiscazosLoader.getFHs('{% url dl_sources_list album.pk %}');">
            <img id="album-cover" src="{{ MEDIA_URL }}{{ album.main_release.cover }}" alt="Album Cover" />
            <span class="load-button"><img src="{{ STATIC_URL }}img/play-overlay.png" alt="Play"></span>
          </a>
          <div id="loading-discazo">
            <span class="caption" style="display: none;">Loading the album... please wait</span>
          </div>
        </div>
        <div class="left">
          <table id="playlist">
          {% for disc in album.main_release.discs.all %}
            {% for track in disc.tracks.for_playlist %}
              <tr>
                <td rel="{{ track.offset }}" class="track-number">{{ track.number }}</td>
                <td class="track-name">{{ track.song }}</td>
                <td rel="{{ track.length }}" class="track-length">{{ track.length_f }}</td>  
              </tr>
            {% endfor %}
          {% endfor %}
          </table>
        </div>
      </div>
      <div class="clearer"></div>
      <div id="player-controls" style="display:none;">
        <p id="playing-info">Playing: <span id="current-track">Not playing</span></p>
        <span id="album-length" style="display:none;">2289</span>
        <button id="play-button">Play</button>
        <button id="prev-button">Prev</button>
        <button id="next-button">Next</button>
        <div id="progressbar"></div>
        <span id="time-elapsed">00:00</span>
      </div>
      <div class="clearer"></div>
    </div>
  </div>
</div>
{% endblock %}